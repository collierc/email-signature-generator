<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Email Signature Generator (URL-based Images)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>

  <style>
    .copy-alert {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem;
      background-color: #4CAF50;
      color: white;
      border-radius: 4px;
      display: none;
      animation: fadeIn 0.3s, fadeOut 0.3s 2.7s;
    }

    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    @keyframes fadeOut {
      from {opacity: 1;}
      to {opacity: 0;}
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen p-4">
  <div id="root"></div>
  <div id="copyAlert" class="copy-alert">
    Signature copied! Paste in Gmail using Ctrl+V (or Cmd+V on Mac)
  </div>
  <div id="copyHtmlAlert" class="copy-alert" style="background-color: #2196F3;">
    HTML copied! Paste into any HTML editor.
  </div>

  <script type="text/babel">
    const EmailSignatureGenerator = () => {
      const [showPreview, setShowPreview] = React.useState(false);
      const [formData, setFormData] = React.useState({
        name: '',
        title: '',
        photoUrl: '',
        companyLogoUrl: '',
        directPhone: '',
        cellPhone: '',
        email: '',
        companyWebsite: '',
        meetingLink: ''
      });

      const handleInputChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
      };

      const generateSignature = () => {
        const safeFormData = { ...formData };
        return `
          <table style="font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4;">
            <tr>
              <td style="padding-right: 10px;">
                ${formData.photoUrl ? `<img src="${formData.photoUrl}" style="width: 85px; height: 100px; border-radius: 4px; object-fit: cover;" />` : ''}
              </td>
              <td>
                <span style="font-weight: bold;">${safeFormData.name}</span>
                ${safeFormData.title ? ` | <span>${safeFormData.title}</span>` : ''}
                <br/>
                <a href="mailto:${safeFormData.email}" style="color: #4A90E2;">${safeFormData.email}</a>
              </td>
            </tr>
          </table>
        `;
      };

      const copyToClipboard = () => {
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = generateSignature();
        document.body.appendChild(tempDiv);

        const range = document.createRange();
        range.selectNodeContents(tempDiv);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);

        document.execCommand('copy');
        document.body.removeChild(tempDiv);
        document.getElementById('copyAlert').style.display = 'block';
      };

      const copyHtmlToClipboard = () => {
        const htmlSignature = generateSignature();
        navigator.clipboard.writeText(htmlSignature).then(() => {
          document.getElementById('copyHtmlAlert').style.display = 'block';
        });
      };

      return (
        <div>
          <button onClick={copyToClipboard}>Copy Signature</button>
          <button onClick={copyHtmlToClipboard}>Copy HTML</button>
          {showPreview && <div dangerouslySetInnerHTML={{ __html: generateSignature() }} />}
        </div>
      );
    };

    ReactDOM.render(<EmailSignatureGenerator />, document.getElementById('root'));
  </script>
</body>
</html>
